<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matt Majak - B2B Sales Strategist & High-Ticket Closer</title>
    <!-- Chosen Palette: Dark B2B (Base: Gray-900, Accent: Blue-600) -->
    <!-- Application Structure Plan: Zaktualizowana struktura lejka sprzedaÅ¼owego. 1. Hero (BÃ³l/Obietnica), 2. DowÃ³d SpoÅ‚eczny (Budowanie zaufania), 3. OÅ› Czasu Kompetencji (Historia = USP), 4. Oferta (RozwiÄ…zanie), 5. Finalne CTA. Ta struktura jest zoptymalizowana pod zimny ruch B2B, natychmiastowo budujÄ…c autorytet (Logotypy, 100+ zespÃ³Å‚) przed przedstawieniem oferty. -->
    <!-- Visualization & Content Choices: Informacja ('100+ zespÃ³Å‚', 'NLP', 'OZE/Telco') -> Cel (Budowanie autorytetu/USP) -> Prezentacja (Wizualna OÅ› Czasu) -> Interakcja (Przewijanie) -> Uzasadnienie (Przedstawia ewolucjÄ™ kompetencji w angaÅ¼ujÄ…cy sposÃ³b). Logotypy (T-Mobile, Polenergia) -> Cel (DowÃ³d spoÅ‚eczny) -> Prezentacja (Stylizowany tekst/placeholder) -> Uzasadnienie (Szybki 'trust factor'). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        html {
            scroll-behavior: smooth;
        }
        .lang-btn {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .lang-btn.active {
            opacity: 1;
            transform: scale(1.15);
        }
        .lang-btn:not(.active) {
            opacity: 0.5;
        }
        .lang-btn:not(.active):hover {
            opacity: 0.75;
        }
    </style>
</head>
<body class="bg-gray-900 text-white antialiased">

    <!-- ==== HEADER ==== -->
    <header class="container mx-auto px-6 py-6 flex justify-between items-center sticky top-0 bg-gray-900 z-10 border-b border-gray-800">
        <div class="text-2xl font-bold">
            Matt Majak.
        </div>
        <nav class="flex items-center space-x-4 md:space-x-6">
            <div class="flex items-center space-x-3">
                <button data-lang="pl" class="lang-btn active" title="Polski">ğŸ‡µğŸ‡±</button>
                <button data-lang="en" class="lang-btn" title="English">ğŸ‡¬ğŸ‡§</button>
                <button data-lang="nl" class="lang-btn" title="Nederlands">ğŸ‡³ğŸ‡±</button>
            </div>
            <a href="#cta" data-lang-key="header.cta" class="bg-blue-600 text-white px-5 py-3 rounded-lg font-semibold text-sm hover:bg-blue-700 transition duration-300 hidden md:inline-block">
                UmÃ³w Audyt SprzedaÅ¼y
            </a>
        </nav>
    </header>

    <!-- ==== 1. HERO SECTION ==== -->
    <section class="py-24 md:py-32 bg-gradient-to-b from-gray-900 to-gray-800">
        <div class="container mx-auto px-6 text-center max-w-4xl">
            <h1 data-lang-key="hero.title" class="text-4xl md:text-6xl font-black leading-tight mb-6">
                Leady wpadajÄ…, ale <span class="text-red-400">umowy nie wyjeÅ¼dÅ¼ajÄ…?</span>
            </h1>
            <p data-lang-key="hero.subtitle" class="text-lg md:text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
                Nazywam siÄ™ Matt Majak. ÅÄ…czÄ™ <strong>inÅ¼ynieriÄ™ sprzedaÅ¼y</strong> (zarzÄ…dzanie 100+ osÃ³b) z <strong>psychologiÄ… (NLP)</strong>, aby zbudowaÄ‡ TwÃ³j skalowalny i skuteczny dziaÅ‚ handlowy.
            </p>
            <a href="#cta" data-lang-key="hero.cta" class="bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105">
                UmÃ³w bezpÅ‚atny Audyt SprzedaÅ¼y
            </a>
        </div>
    </section>

    <!-- ==== 2. DOWÃ“D SPOÅECZNY (TRUST) ==== -->
    <section class="py-16 bg-gray-800">
        <div class="container mx-auto px-6 text-center">
            <h3 data-lang-key="trust.title" class="text-lg text-gray-400 font-semibold mb-6 uppercase tracking-wider">
                DoÅ›wiadczenie zdobyte u liderÃ³w rynkowych
            </h3>
            <div class="flex flex-wrap justify-center items-center gap-x-12 gap-y-6">
                <span data-lang-key="trust.logo1" class="text-gray-500 text-3xl font-bold">T-Mobile</span>
                <span data-lang-key="trust.logo2" class="text-gray-500 text-3xl font-bold">Polenergia</span>
                <span data-lang-key="trust.logo3" class="text-gray-500 text-3xl font-bold">Liberty Poland</span>
                <span data-lang-key="trust.logo4" class="text-gray-500 text-3xl font-bold">Partner Polkomtel</span>
            </div>
        </div>
    </section>

    <!-- ==== 3. "DLACZEGO MATT MAJAK?" (OÅš CZASU) ==== -->
    <section class="py-20">
        <div class="container mx-auto px-6 max-w-4xl">
            <div class="text-center mb-16">
                <h2 data-lang-key="timeline.title" class="text-4xl md:text-5xl font-bold mb-6">
                    Od Managera 100+ do Stratega High-Ticket
                </h2>
                <p data-lang-key="timeline.subtitle" class="text-2xl text-blue-400 italic font-semibold max-w-2xl mx-auto">
                    "Dobrych handlowcÃ³w siÄ™ nie znajduje. Dobrych handlowcÃ³w siÄ™ buduje."
                </p>
            </div>
            
            <div class="relative max-w-3xl mx-auto">
                <!-- Linia czasu -->
                <div class="absolute left-4 md:left-1/2 top-0 h-full w-0.5 bg-blue-500 -ml-[1px]"></div>
                
                <!-- Punkt 1 -->
                <div class="relative pl-12 md:pl-0 mb-16">
                    <div class="absolute left-0 md:left-1/2 -ml-4 top-1 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center font-bold text-white shadow-lg">1</div>
                    <div class="md:w-1/2 md:pr-12 md:ml-auto md:text-right">
                        <h3 data-lang-key="timeline.p1.title" class="text-2xl font-bold text-blue-400 mb-2">Fundament: Skala i Presja</h3>
                        <p data-lang-key="timeline.p1.text" class="text-lg text-gray-300">
                            W wieku 20 lat zarzÄ…dzaÅ‚em zespoÅ‚em <strong>100+ osÃ³b w Call Center</strong> (Liberty/Polkomtel). NauczyÅ‚em siÄ™, jak budowaÄ‡ <strong>pÅ‚ynnoÅ›Ä‡ operacyjnÄ…</strong>, pisaÄ‡ skuteczne skrypty i utrzymywaÄ‡ wyniki pod ekstremalnÄ… presjÄ….
                        </p>
                    </div>
                </div>

                <!-- Punkt 2 -->
                <div class="relative pl-12 md:pl-0 mb-16">
                    <div class="absolute left-0 md:left-1/2 -ml-4 top-1 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center font-bold text-white shadow-lg">2</div>
                    <div class="md:w/2 md:pl-12">
                        <h3 data-lang-key="timeline.p2.title" class="text-2xl font-bold text-blue-400 mb-2">Psychologia: InÅ¼ynieria CzÅ‚owieka</h3>
                        <p data-lang-key="timeline.p2.text" class="text-lg text-gray-300">
                            Setki rekrutacji (MLM, zespoÅ‚y rozproszone) oraz certyfikacje <strong>NLP, DISC i Persolog</strong>. Rozumiem, jak ludzie myÅ›lÄ…, kupujÄ… i co naprawdÄ™ ich motywuje. PotrafiÄ™ odblokowaÄ‡ potencjaÅ‚ w zespole.
                        </p>
                    </div>
                </div>

                <!-- Punkt 3 -->
                <div class="relative pl-12 md:pl-0">
                    <div class="absolute left-0 md:left-1/2 -ml-4 top-1 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center font-bold text-white shadow-lg">3</div>
                    <div class="md:w-1/2 md:pr-12 md:ml-auto md:text-right">
                        <h3 data-lang-key="timeline.p3.title" class="text-2xl font-bold text-blue-400 mb-2">Strategia: WartoÅ›Ä‡ High-Ticket</h3>
                        <p data-lang-key="timeline.p3.text" class="text-lg text-gray-300">
                            DoÅ›wiadczenie w OZE i Telco (Polenergia, T-Mobile) nauczyÅ‚o mnie <strong>Consultative Selling</strong>. PrzeszedÅ‚em od sprzedaÅ¼y transakcyjnej do zamykania <strong>duÅ¼ych, relacyjnych kontraktÃ³w B2B</strong>, opartych na strategii i wizji.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ==== 4. OFERTA (DWA FILARY) ==== -->
    <section class="py-20 bg-gray-800">
        <div class="container mx-auto px-6 max-w-5xl">
            <h2 data-lang-key="offer.title" class="text-3xl md:text-4xl font-bold text-center mb-12">
                Dwa filary wspÃ³Å‚pracy. Wybierz swÃ³j model.
            </h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Oferta 1 -->
                <div class="bg-gray-900 p-8 rounded-lg border border-blue-500/50 flex flex-col shadow-xl">
                    <h3 data-lang-key="offer.p1.title" class="text-2xl font-bold text-blue-400 mb-4">"Done-For-You"</h3>
                    <p data-lang-key="offer.p1.subtitle" class="text-lg font-semibold mb-4">ZewnÄ™trzny High-Ticket Closer</p>
                    <p data-lang-key="offer.p1.text" class="text-gray-300 mb-6 flex-grow">
                        PrzejmujÄ™ Twoje najgorÄ™tsze lub najtrudniejsze leady B2B. <strong>OsobiÅ›cie domykam sprzedaÅ¼</strong> jako TwÃ³j zewnÄ™trzny, elitarny Closer. Ty skupiasz siÄ™ na biznesie, ja na dostarczaniu przychodu. <strong>PÅ‚acisz za rezultat.</strong>
                    </p>
                    
                    <!-- ==== GEMINI FEATURE 2 START ==== -->
                    <div class="bg-gray-800 p-4 rounded-lg my-4 border border-blue-900/50">
                        <p data-lang-key="gemini.p1.title" class="text-sm font-semibold text-blue-300 mb-2">Zobacz demo mojej ekspertyzy:</p>
                        <label for="objection_input" data-lang-key="gemini.p1.label" class="text-sm text-gray-400">Podaj obiekcjÄ™ klienta (np. "Za drogo"):</label>
                        <input type="text" id="objection_input" data-lang-key="gemini.p1.placeholder" class="w-full bg-gray-700 text-white rounded-md p-2 mt-2 text-sm" placeholder="np. 'MuszÄ™ siÄ™ zastanowiÄ‡'">
                        <button id="generate_objection_btn" data-lang-key="gemini.p1.button" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:bg-blue-700 transition duration-300 mt-3">
                            âœ¨ Opracuj ReakcjÄ™ (AI)
                        </button>
                        <div id="objection_loader" class="text-center my-3 hidden">
                            <p data-lang-key="gemini.p1.loader" class="text-sm text-gray-400 animate-pulse">PrzeformuÅ‚owujÄ™ problem...</p>
                        </div>
                        <div id="objection_result" class="mt-3 hidden">
                            <p data-lang-key="gemini.p1.result" class="text-sm font-semibold text-gray-300">Propozycja odpowiedzi (re-framing):</p>
                            <pre id="objection_output" class="text-sm text-gray-300 bg-gray-900 p-3 rounded-md whitespace-pre-wrap font-sans"></pre>
                        </div>
                    </div>
                    <!-- ==== GEMINI FEATURE 2 END ==== -->
                    
                    <a href="#cta" data-lang-key="offer.p1.cta" class="mt-4 text-blue-400 font-semibold hover:text-blue-300">ChcÄ™ domykaÄ‡ wiÄ™cej &rarr;</a>
                </div>
                
                <!-- Oferta 2 -->
                <div class="bg-gray-900 p-8 rounded-lg border border-gray-700 flex flex-col">
                    <h3 data-lang-key="offer.p2.title" class="text-2xl font-bold text-blue-400 mb-4">"Done-With-You"</h3>
                    <p data-lang-key="offer.p2.subtitle" class="text-lg font-semibold mb-4">Fractional Sales Manager</p>
                    <p data-lang-key="offer.p2.text" class="text-gray-300 mb-6 flex-grow">
                        WchodzÄ™ do Twojej firmy na 3-6 miesiÄ™cy. <strong>AudytujÄ™ procesy</strong>. TworzÄ™ nowe skrypty sprzedaÅ¼owe (z uÅ¼yciem NLP). <strong>SzkolÄ™ TwÃ³j zespÃ³Å‚</strong> z domykania i budowania autorytetu. WychodzÄ™, zostawiajÄ…c maszynÄ™ do sprzedaÅ¼y.
                    </p>
                    
                    <!-- ==== GEMINI FEATURE START ==== -->
                    <div class="bg-gray-800 p-4 rounded-lg my-4 border border-blue-900/50">
                        <p data-lang-key="gemini.p2.title" class="text-sm font-semibold text-blue-300 mb-2">Zobacz demo mojej metody:</p>
                        <label for="industry_input" data-lang-key="gemini.p2.label" class="text-sm text-gray-400">Podaj swojÄ… branÅ¼Ä™ (np. Software House):</label>
                        <input type="text" id="industry_input" data-lang-key="gemini.p2.placeholder" class="w-full bg-gray-700 text-white rounded-md p-2 mt-2 text-sm" placeholder="np. Software House B2B">
                        <button id="generate_script_btn" data-lang-key="gemini.p2.button" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:bg-blue-700 transition duration-300 mt-3">
                            âœ¨ Wygeneruj Otwarcie Skryptu (AI)
                        </button>
                        <div id="script_loader" class="text-center my-3 hidden">
                            <p data-lang-key="gemini.p2.loader" class="text-sm text-gray-400 animate-pulse">AnalizujÄ™ psychologiÄ™ klienta...</p>
                        </div>
                        <div id="script_result" class="mt-3 hidden">
                            <p data-lang-key="gemini.p2.result" class="text-sm font-semibold text-gray-300">Oto propozycja otwarcia:</p>
                            <pre id="script_output" class="text-sm text-gray-300 bg-gray-900 p-3 rounded-md whitespace-pre-wrap font-sans"></pre>
                        </div>
                    </div>
                    <!-- ==== GEMINI FEATURE END ==== -->
                    
                    <a href="#cta" data-lang-key="offer.p2.cta" class="mt-4 text-blue-400 font-semibold hover:text-blue-300">ChcÄ™ zbudowaÄ‡ peÅ‚ny proces &rarr;</a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- ==== 5. FOOTER + FINAL CTA ==== -->
    <section id="cta" class="py-24 bg-gradient-to-t from-gray-900 to-gray-800">
        <div class="container mx-auto px-6 text-center max-w-3xl">
            <h2 data-lang-key="cta.title" class="text-3xl md:text-5xl font-black leading-tight mb-6">
                Wiesz, Å¼e tracisz pieniÄ…dze. Czas to policzyÄ‡.
            </h2>
            <p data-lang-key="cta.subtitle" class="text-lg md:text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
                UmÃ³w siÄ™ na <strong>bezpÅ‚atny, 30-minutowy Audyt SprzedaÅ¼y</strong>. PrzeanalizujÄ™ TwÃ³j obecny proces i pokaÅ¼Ä™ Ci 3 obszary, w ktÃ³rych moÅ¼esz natychmiast zwiÄ™kszyÄ‡ konwersjÄ™.
            </p>
            
            <!-- ==== GEMINI FEATURE 3 START ==== -->
            <div class="bg-gray-800 p-6 rounded-lg my-8 max-w-xl mx-auto border border-blue-900/50">
                <p data-lang-key="gemini.p3.title" class="text-sm font-semibold text-blue-300 mb-2">Chcesz zobaczyÄ‡, jak myÅ›lÄ™?</p>
                <label for="problem_input" data-lang-key="gemini.p3.label" class="text-sm text-gray-400">Opisz swÃ³j najwiÄ™kszy problem sprzedaÅ¼owy (1 zdanie):</label>
                <textarea id="problem_input" data-lang-key="gemini.p3.placeholder" class="w-full bg-gray-700 text-white rounded-md p-2 mt-2 text-sm h-20" placeholder="np. 'MÃ³j zespÃ³Å‚ boi siÄ™ dzwoniÄ‡' lub 'Klienci mÃ³wiÄ…, Å¼e jest za drogo'"></textarea>
                <button id="analyze_problem_btn" data-lang-key="gemini.p3.button" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:bg-blue-700 transition duration-300 mt-3">
                    âœ¨ Zdiagnozuj MÃ³j Problem (AI)
                </button>
                <div id="problem_loader" class="text-center my-3 hidden">
                    <p data-lang-key="gemini.p3.loader" class="text-sm text-gray-400 animate-pulse">AnalizujÄ™... Daj mi sekundÄ™...</p>
                </div>
                <div id="problem_result" class="mt-3 hidden">
                    <p data-lang-key="gemini.p3.result" class="text-sm font-semibold text-gray-300">WstÄ™pna diagnoza i rekomendacja:</p>
                    <pre id="problem_output" class="text-sm text-gray-300 bg-gray-900 p-3 rounded-md whitespace-pre-wrap font-sans"></pre>
                </div>
            </div>
            <!-- ==== GEMINI FEATURE 3 END ==== -->
            
            <a href="https://calendly.com/twoj-link" target="_blank" data-lang-key="cta.button" class="bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105">
                Zarezerwuj Audyt (Link do Kalendarza)
            </a>
        </div>
    </section>

    <!-- ==== STOPKA ==== -->
    <footer class="py-10 bg-gray-900 border-t border-gray-700">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p data-lang-key="footer.copy">&copy; 2024 Matt Majak. Wszelkie prawa zastrzeÅ¼one.</p>
            <p data-lang-key="footer.location" class="text-sm mt-2">
                *DziaÅ‚am z Holandii, sprzedajÄ™ dla Polski.*
            </p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        let currentLang = 'pl';
        const langButtons = document.querySelectorAll('.lang-btn');

        const translations = {
            'pl': {
                'header.cta': 'UmÃ³w Audyt SprzedaÅ¼y',
                'hero.title': 'Leady wpadajÄ…, ale <span class="text-red-400">umowy nie wyjeÅ¼dÅ¼ajÄ…?</span>',
                'hero.subtitle': 'Nazywam siÄ™ Matt Majak. ÅÄ…czÄ™ <strong>inÅ¼ynieriÄ™ sprzedaÅ¼y</strong> (zarzÄ…dzanie 100+ osÃ³b) z <strong>psychologiÄ… (NLP)</strong>, aby zbudowaÄ‡ TwÃ³j skalowalny i skuteczny dziaÅ‚ handlowy.',
                'hero.cta': 'UmÃ³w bezpÅ‚atny Audyt SprzedaÅ¼y',
                'trust.title': 'DoÅ›wiadczenie zdobyte u liderÃ³w rynkowych',
                'trust.logo1': 'T-Mobile',
                'trust.logo2': 'Polenergia',
                'trust.logo3': 'Liberty Poland',
                'trust.logo4': 'Partner Polkomtel',
                'timeline.title': 'Od Managera 100+ do Stratega High-Ticket',
                'timeline.subtitle': '"Dobrych handlowcÃ³w siÄ™ nie znajduje. Dobrych handlowcÃ³w siÄ™ buduje."',
                'timeline.p1.title': 'Fundament: Skala i Presja',
                'timeline.p1.text': 'W wieku 20 lat zarzÄ…dzaÅ‚em zespoÅ‚em <strong>100+ osÃ³b w Call Center</strong> (Liberty/Polkomtel). NauczyÅ‚em siÄ™, jak budowaÄ‡ <strong>pÅ‚ynnoÅ›Ä‡ operacyjnÄ…</strong>, pisaÄ‡ skuteczne skrypty i utrzymywaÄ‡ wyniki pod ekstremalnÄ… presjÄ….',
                'timeline.p2.title': 'Psychologia: InÅ¼ynieria CzÅ‚owieka',
                'timeline.p2.text': 'Setki rekrutacji (MLM, zespoÅ‚y rozproszone) oraz certyfikacje <strong>NLP, DISC i Persolog</strong>. Rozumiem, jak ludzie myÅ›lÄ…, kupujÄ… i co naprawdÄ™ ich motywuje. PotrafiÄ™ odblokowaÄ‡ potencjaÅ‚ w zespole.',
                'timeline.p3.title': 'Strategia: WartoÅ›Ä‡ High-Ticket',
                'timeline.p3.text': 'DoÅ›wiadczenie w OZE i Telco (Polenergia, T-Mobile) nauczyÅ‚o mnie <strong>Consultative Selling</strong>. PrzeszedÅ‚em od sprzedaÅ¼y transakcyjnej do zamykania <strong>duÅ¼ych, relacyjnych kontraktÃ³w B2B</strong>, opartych na strategii i wizji.',
                'offer.title': 'Dwa filary wspÃ³Å‚pracy. Wybierz swÃ³j model.',
                'offer.p1.title': '"Done-For-You"',
                'offer.p1.subtitle': 'ZewnÄ™trzny High-Ticket Closer',
                'offer.p1.text': 'PrzejmujÄ™ Twoje najgorÄ™tsze lub najtrudniejsze leady B2B. <strong>OsobiÅ›cie domykam sprzedaÅ¼</strong> jako TwÃ³j zewnÄ™trzny, elitarny Closer. Ty skupiasz siÄ™ na biznesie, ja na dostarczaniu przychodu. <strong>PÅ‚acisz za rezultat.</strong>',
                'offer.p1.cta': 'ChcÄ™ domykaÄ‡ wiÄ™cej &rarr;',
                'offer.p2.title': '"Done-With-You"',
                'offer.p2.subtitle': 'Fractional Sales Manager',
                'offer.p2.text': 'WchodzÄ™ do Twojej firmy na 3-6 miesiÄ™cy. <strong>AudytujÄ™ procesy</strong>. TworzÄ™ nowe skrypty sprzedaÅ¼owe (z uÅ¼yciem NLP). <strong>SzkolÄ™ TwÃ³j zespÃ³Å‚</strong> z domykania i budowania autorytetu. WychodzÄ™, zostawiajÄ…c maszynÄ™ do sprzedaÅ¼y.',
                'offer.p2.cta': 'ChcÄ™ zbudowaÄ‡ peÅ‚ny proces &rarr;',
                'cta.title': 'Wiesz, Å¼e tracisz pieniÄ…dze. Czas to policzyÄ‡.',
                'cta.subtitle': 'UmÃ³w siÄ™ na <strong>bezpÅ‚atny, 30-minutowy Audyt SprzedaÅ¼y</strong>. PrzeanalizujÄ™ TwÃ³j obecny proces i pokaÅ¼Ä™ Ci 3 obszary, w ktÃ³rych moÅ¼esz natychmiast zwiÄ™kszyÄ‡ konwersjÄ™.',
                'cta.button': 'Zarezerwuj Audyt (Link do Kalendarza)',
                'footer.copy': '&copy; 2024 Matt Majak. Wszelkie prawa zastrzeÅ¼one.',
                'footer.location': '*DziaÅ‚am z Holandii, sprzedajÄ™ dla Polski.*',
                'gemini.p1.title': 'Zobacz demo mojej ekspertyzy:',
                'gemini.p1.label': 'Podaj obiekcjÄ™ klienta (np. "Za drogo"):',
                'gemini.p1.placeholder': 'np. \'MuszÄ™ siÄ™ zastanowiÄ‡\'',
                'gemini.p1.button': 'âœ¨ Opracuj ReakcjÄ™ (AI)',
                'gemini.p1.loader': 'PrzeformuÅ‚owujÄ™ problem...',
                'gemini.p1.result': 'Propozycja odpowiedzi (re-framing):',
                'gemini.p2.title': 'Zobacz demo mojej metody:',
                'gemini.p2.label': 'Podaj swojÄ… branÅ¼Ä™ (np. Software House):',
                'gemini.p2.placeholder': 'np. Software House B2B',
                'gemini.p2.button': 'âœ¨ Wygeneruj Otwarcie Skryptu (AI)',
                'gemini.p2.loader': 'AnalizujÄ™ psychologiÄ™ klienta...',
                'gemini.p2.result': 'Oto propozycja otwarcia:',
                'gemini.p3.title': 'Chcesz zobaczyÄ‡, jak myÅ›lÄ™?',
                'gemini.p3.label': 'Opisz swÃ³j najwiÄ™kszy problem sprzedaÅ¼owy (1 zdanie):',
                'gemini.p3.placeholder': 'np. \'MÃ³j zespÃ³Å‚ boi siÄ™ dzwoniÄ‡\' lub \'Klienci mÃ³wiÄ…, Å¼e jest za drogo\'',
                'gemini.p3.button': 'âœ¨ Zdiagnozuj MÃ³j Problem (AI)',
                'gemini.p3.loader': 'AnalizujÄ™... Daj mi sekundÄ™...',
                'gemini.p3.result': 'WstÄ™pna diagnoza i rekomendacja:',
                'gemini.p1.system': 'JesteÅ› Å›wiatowej klasy Closerem High-Ticket, Mattem Majakiem. Specjalizujesz siÄ™ w psychologii (NLP, DISC) i przeÅ‚amywaniu obiekcji. TwÃ³j ton jest spokojny, autorytatywny i empatyczny. Nigdy nie \'atakujesz\' klienta, ale \'re-framujesz\' (przeformuÅ‚owujesz) jego obiekcjÄ™, aby pokazaÄ‡ nowÄ… perspektywÄ™ i utrzymaÄ‡ kontrolÄ™ nad rozmowÄ…. Generujesz krÃ³tkÄ…, 2-3 zdaniowÄ… odpowiedÅº na obiekcjÄ™ klienta. MÃ³w po polsku.',
                'gemini.p1.user': 'Obiekcja klienta to: "{objection}". StwÃ³rz dla mnie mocnÄ…, 2-3 zdaniowÄ… odpowiedÅº, ktÃ³ra re-framuje ten problem, opierajÄ…c siÄ™ na zasadach NLP.',
                'gemini.p2.system': 'JesteÅ› Å›wiatowej klasy strategiem sprzedaÅ¼y B2B, Mattem Majakiem. Specjalizujesz siÄ™ w psychologii (NLP, DISC). TwÃ³j ton jest autorytatywny, ale empatyczny. Generujesz krÃ³tkie, 2-3 zdaniowe skrypty otwierajÄ…ce rozmowÄ™ (cold call/email) dla podanej branÅ¼y, skupiajÄ…c siÄ™ na budowaniu natychmiastowego zaufania i \'pattern interrupt\' (przeÅ‚amaniu wzorca). MÃ³w po polsku.',
                'gemini.p2.user': 'Moja branÅ¼a to: {industry}. StwÃ³rz dla mnie mocny, 2-3 zdaniowy skrypt otwierajÄ…cy rozmowÄ™ z potencjalnym klientem.',
                'gemini.p3.system': 'JesteÅ› Matt Majak, Å›wiatowej klasy B2B Sales Strategist & Closer. UÅ¼ytkownik podaje ci swÃ³j najwiÄ™kszy problem sprzedaÅ¼owy. Twoim zadaniem jest w 1-2 zdaniach zdiagnozowaÄ‡ prawdopodobnÄ… przyczynÄ™ (opierajÄ…c siÄ™ na psychologii, procesie lub mentalnoÅ›ci) i zakoÅ„czyÄ‡ mocnym, 1-zdaniowym wezwaniem do akcji, aby omÃ³wiÄ‡ to na audycie. TwÃ³j ton jest autorytatywny, wnikliwy i budzi zaufanie. MÃ³w po polsku.',
                'gemini.p3.user': 'MÃ³j najwiÄ™kszy problem sprzedaÅ¼owy to: "{problem}". Zdiagnozuj to i daj rekomendacjÄ™.',
                'gemini.error.noKey': 'Funkcja demo AI jest wyÅ‚Ä…czona. PeÅ‚ne demo dostÄ™pne podczas audytu.'
            },
            'en': {
                'header.cta': 'Book Sales Audit',
                'hero.title': 'Leads are coming in, but <span class="text-red-400">deals aren\'t closing?</span>',
                'hero.subtitle': 'I\'m Matt Majak. I merge <strong>sales engineering</strong> (managing 100+ people) with <strong>psychology (NLP)</strong> to build your scalable and effective sales department.',
                'hero.cta': 'Book a Free Sales Audit',
                'trust.title': 'Experience Gained from Market Leaders',
                'trust.logo1': 'T-Mobile',
                'trust.logo2': 'Polenergia',
                'trust.logo3': 'Liberty Poland',
                'trust.logo4': 'Partner Polkomtel',
                'timeline.title': 'From 100+ Manager to High-Ticket Strategist',
                'timeline.subtitle': '"Great salespeople aren\'t found. Great salespeople are built."',
                'timeline.p1.title': 'Foundation: Scale & Pressure',
                'timeline.p1.text': 'At 20, I managed a <strong>100+ person Call Center</strong> team (Liberty/Polkomtel). I learned how to build <strong>operational fluency</strong>, write effective scripts, and maintain results under extreme pressure.',
                'timeline.p2.title': 'Psychology: Human Engineering',
                'timeline.p2.text': 'Hundreds of recruitments (MLM, Distributed Teams) and certifications in <strong>NLP, DISC & Persolog</strong>. I understand how people think, buy, and what truly motivates them. I can unlock potential in a team.',
                'timeline.p3.title': 'Strategy: High-Ticket Value',
                'timeline.p3.text': 'Experience in Renewables & Telco (Polenergia, T-Mobile) taught me <strong>Consultative Selling</strong>. I moved from transactional sales to closing <strong>large, relational B2B contracts</strong> based on strategy and vision.',
                'offer.title': 'Two Pillars of Cooperation. Choose Your Model.',
                'offer.p1.title': '"Done-For-You"',
                'offer.p1.subtitle': 'External High-Ticket Closer',
                'offer.p1.text': 'I take over your hottest or most difficult B2B leads. <strong>I personally close the sale</strong> as your external, elite Closer. You focus on the business; I focus on delivering revenue. <strong>You pay for results.</strong>',
                'offer.p1.cta': 'I want to close more &rarr;',
                'offer.p2.title': '"Done-With-You"',
                'offer.p2.subtitle': 'Fractional Sales Manager',
                'offer.p2.text': 'I join your company for 3-6 months. <strong>I audit processes</strong>. I create new sales scripts (using NLP). <strong>I train your team</strong> in closing and building authority. I leave, leaving behind a sales machine.',
                'offer.p2.cta': 'I want to build a process &rarr;',
                'cta.title': 'You know you\'re losing money. It\'s time to count it.',
                'cta.subtitle': 'Book a <strong>free, 30-minute Sales Audit</strong>. I will analyze your current process and show you 3 areas where you can immediately increase conversion.',
                'cta.button': 'Book Audit (Calendar Link)',
                'footer.copy': '&copy; 2024 Matt Majak. All rights reserved.',
                'footer.location': '*Working from the Netherlands, selling for Poland.*',
                'gemini.p1.title': 'See a demo of my expertise:',
                'gemini.p1.label': 'Enter a customer objection (e.g., "Too expensive"):',
                'gemini.p1.placeholder': 'e.g., \'I need to think about it\'',
                'gemini.p1.button': 'âœ¨ Handle Objection (AI)',
                'gemini.p1.loader': 'Reframing the problem...',
                'gemini.p1.result': 'Proposed response (re-framing):',
                'gemini.p2.title': 'See a demo of my method:',
                'gemini.p2.label': 'Enter your industry (e.g., Software House):',
                'gemini.p2.placeholder': 'e.g., B2B Software House',
                'gemini.p2.button': 'âœ¨ Generate Opening Script (AI)',
                'gemini.p2.loader': 'Analyzing customer psychology...',
                'gemini.p2.result': 'Here is a proposed opening:',
                'gemini.p3.title': 'Want to see how I think?',
                'gemini.p3.label': 'Describe your biggest sales problem (1 sentence):',
                'gemini.p3.placeholder': 'e.g., \'My team is afraid to cold call\' or \'Clients say we are too expensive\'',
                'gemini.p3.button': 'âœ¨ Diagnose My Problem (AI)',
                'gemini.p3.loader': 'Analyzing... Give me a second...',
                'gemini.p3.result': 'Initial diagnosis and recommendation:',
                'gemini.p1.system': 'You are a world-class High-Ticket Closer, Matt Majak. You specialize in psychology (NLP, DISC) and overcoming objections. Your tone is calm, authoritative, and empathetic. You never \'attack\' the client but \'re-frame\' their objection to show a new perspective and maintain control of the conversation. Generate a short, 2-3 sentence response to the client\'s objection. Speak in English.',
                'gemini.p1.user': 'The client\'s objection is: "{objection}". Create a powerful, 2-3 sentence response for me that re-frames this problem based on NLP principles.',
                'gemini.p2.system': 'You are a world-class B2B sales strategist, Matt Majak. You specialize in psychology (NLP, DISC). Your tone is authoritative yet empathetic. You generate short, 2-3 sentence opening scripts (cold call/email) for the given industry, focusing on building instant trust and a \'pattern interrupt\'. Speak in English.',
                'gemini.p2.user': 'My industry is: {industry}. Create a strong, 2-3 sentence opening script for a potential client for me.',
                'gemini.p3.system': 'You are Matt Majak, a world-class B2B Sales Strategist & Closer. The user is telling you their biggest sales problem. Your task is to diagnose the likely cause (based on psychology, process, or mindset) in 1-2 sentences and end with a strong, 1-sentence call to action to discuss this in an audit. Your tone is authoritative, insightful, and builds trust. Speak in English.',
                'gemini.p3.user': 'My biggest sales problem is: "{problem}". Diagnose this and give a recommendation.',
                'gemini.error.noKey': 'AI Demo feature is disabled. Full demo available during the audit.'
            },
            'nl': {
                'header.cta': 'Boek Sales Audit',
                'hero.title': 'Leads komen binnen, maar <span class="text-red-400">deals worden niet gesloten?</span>',
                'hero.subtitle': 'Ik ben Matt Majak. Ik combineer <strong>sales engineering</strong> (management van 100+ mensen) met <strong>psychologie (NLP)</strong> om uw schaalbare en effectieve salesafdeling te bouwen.',
                'hero.cta': 'Boek een Gratis Sales Audit',
                'trust.title': 'Ervaring opgedaan bij marktleiders',
                'trust.logo1': 'T-Mobile',
                'trust.logo2': 'Polenergia',
                'trust.logo3': 'Liberty Poland',
                'trust.logo4': 'Partner Polkomtel',
                'timeline.title': 'Van 100+ Manager tot High-Ticket Strateeg',
                'timeline.subtitle': '"Goede verkopers vind je niet. Goede verkopers bouw je."',
                'timeline.p1.title': 'Basis: Schaal & Druk',
                'timeline.p1.text': 'Op mijn 20e gaf ik leiding aan een <strong>100+ persoon Call Center</strong> team (Liberty/Polkomtel). Ik leerde <strong>operationele processen</strong> te bouwen, effectieve scripts te schrijven en resultaten te behouden onder extreme druk.',
                'timeline.p2.title': 'Psychologie: Human Engineering',
                'timeline.p2.text': 'Honderden wervingen (MLM, externe teams) en certificeringen in <strong>NLP, DISC & Persolog</strong>. Ik begrijp hoe mensen denken, kopen en wat hen echt motiveert. Ik kan het potentieel in een team ontsluiten.',
                'timeline.p3.title': 'Strategie: High-Ticket Waarde',
                'timeline.p3.text': 'Ervaring in OZE & Telco (Polenergia, T-Mobile) leerde mij <strong>Consultative Selling</strong>. Ik stapte over van transactionele verkoop naar het sluiten van <strong>grote, relationele B2B-contracten</strong> op basis van strategie en visie.',
                'offer.title': 'Twee Pijlers van Samenwerking. Kies uw Model.',
                'offer.p1.title': '"Done-For-You"',
                'offer.p1.subtitle': 'Externe High-Ticket Closer',
                'offer.p1.text': 'Ik neem uw warmste of moeilijkste B2B-leads over. <strong>Ik sluit persoonlijk de verkoop</strong> als uw externe, elite Closer. U focust op de business; ik focus op het leveren van omzet. <strong>U betaalt voor resultaat.</strong>',
                'offer.p1.cta': 'Ik wil meer sluiten &rarr;',
                'offer.p2.title': '"Done-With-You"',
                'offer.p2.subtitle': 'Fractional Sales Manager',
                'offer.p2.text': 'Ik sluit me 3-6 maanden aan bij uw bedrijf. <strong>Ik auditeer processen</strong>. Ik creÃ«er nieuwe verkoopscripts (met NLP). <strong>Ik train uw team</strong> in het sluiten van deals en het opbouwen van autoriteit. Ik vertrek en laat een verkoopmachine achter.',
                'offer.p2.cta': 'Ik wil een proces bouwen &rarr;',
                'cta.title': 'U weet dat u geld verliest. Tijd om het te tellen.',
                'cta.subtitle': 'Boek een <strong>gratis Sales Audit van 30 minuten</strong>. Ik analyseer uw huidige proces en toon u 3 gebieden waar u direct de conversie kunt verhogen.',
                'cta.button': 'Boek Audit (Agenda Link)',
                'footer.copy': '&copy; 2024 Matt Majak. Alle rechten voorbehouden.',
                'footer.location': '*Werkend vanuit Nederland, verkopend voor Polen.*',
                'gemini.p1.title': 'Bekijk een demo van mijn expertise:',
                'gemini.p1.label': 'Voer een bezwaar van een klant in (bijv. "Te duur"):',
                'gemini.p1.placeholder': 'bijv. \'Ik moet erover nadenken\'',
                'gemini.p1.button': 'âœ¨ Behandel Bezwaar (AI)',
                'gemini.p1.loader': 'Het probleem herkaderen...',
                'gemini.p1.result': 'Voorgesteld antwoord (re-framing):',
                'gemini.p2.title': 'Bekijk een demo van mijn methode:',
                'gemini.p2.label': 'Voer uw branche in (bijv. Software House):',
                'gemini.p2.placeholder': 'bijv. B2B Software Huis',
                'gemini.p2.button': 'âœ¨ Genereer Openingsscript (AI)',
                'gemini.p2.loader': 'Klantpsychologie analyseren...',
                'gemini.p2.result': 'Hier is een voorgestelde opening:',
                'gemini.p3.title': 'Wilt u zien hoe ik denk?',
                'gemini.p3.label': 'Beschrijf uw grootste verkoopprobleem (1 zin):',
                'gemini.p3.placeholder': 'bijv. \'Mijn team is bang om koud te bellen\' of \'Klanten zeggen dat we te duur zijn\'',
                'gemini.p3.button': 'âœ¨ Diagnoseer Mijn Probleem (AI)',
                'gemini.p3.loader': 'Analyseren... Een moment geduld...',
                'gemini.p3.result': 'Eerste diagnose en aanbeveling:',
                'gemini.p1.system': 'U bent een High-Ticket Closer van wereldklasse, Matt Majak. U bent gespecialiseerd in psychologie (NLP, DISC) en het overwinnen van bezwaren. Uw toon is kalm, gezaghebbend en empathisch. U \'valt\' de klant nooit aan, maar \'herkadert\' (re-framet) hun bezwaar om een nieuw perspectief te tonen en de controle over het gesprek te behouden. Genereer een kort antwoord van 2-3 zinnen op het bezwaar van de klant. Spreek Nederlands.',
                'gemini.p1.user': 'Het bezwaar van de klant is: "{objection}". CreÃ«er voor mij een krachtig antwoord van 2-3 zinnen dat dit probleem herkadert, gebaseerd op NLP-principes.',
                'gemini.p2.system': 'U bent een B2B-salesstrateeg van wereldklasse, Matt Majak. U bent gespecialiseerd in psychologie (NLP, DISC). Uw toon is gezaghebbend en toch empathisch. U genereert korte openingsscripts van 2-3 zinnen (cold call/email) voor de opgegeven branche, gericht op het opbouwen van direct vertrouwen en een \'pattern interrupt\'. Spreek Nederlands.',
                'gemini.p2.user': 'Mijn branche is: {industry}. CreÃ«er voor mij een sterk openingsscript van 2-3 zinnen voor een potentiÃ«le klant.',
                'gemini.p3.system': 'U bent Matt Majak, een B2B Sales Strateeg & Closer van wereldklasse. De gebruiker vertelt u hun grootste verkoopprobleem. Uw taak is om in 1-2 zinnen de waarschijnlijke oorzaak te diagnosticeren (gebaseerd op psychologie, proces of mentaliteit) en te eindigen met een sterke call-to-action van 1 zin om dit in een audit te bespreken. Uw toon is gezaghebbend, inzichtelijk en wekt vertrouwen. Spreek Nederlands.',
                'gemini.p3.user': 'Mijn grootste verkoopprobleem is: "{problem}". Diagnoseer dit en geef een aanbeveling.',
                'gemini.error.noKey': 'AI-demofunctie is uitgeschakeld. Volledige demo beschikbaar tijdens de audit.'
            }
        };

        function setLanguage(lang) {
            if (!translations[lang]) return;
            
            currentLang = lang;
            document.documentElement.lang = lang;

            // Ustawia klasÄ™ 'active' na przyciskach
            langButtons.forEach(btn => {
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            const elements = document.querySelectorAll('[data-lang-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-lang-key');
                const translation = getTranslation(key, lang);

                if (translation) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        if (el.type === 'placeholder') {
                             el.placeholder = translation;
                        } else {
                            el.placeholder = translation;
                        }
                    } else if (el.hasAttribute('data-lang-key-placeholder')) { // Specjalne dla placeholderÃ³w
                        el.placeholder = translation;
                    } else {
                        el.innerHTML = translation; // UÅ¼ywamy innerHTML, aby zachowaÄ‡ tagi <strong>
                    }
                }
            });

            // Aktualizuje placeholdery rÄ™cznie (pewniejsza metoda)
            document.getElementById('objection_input').placeholder = translations[lang]['gemini.p1.placeholder'];
            document.getElementById('industry_input').placeholder = translations[lang]['gemini.p2.placeholder'];
            document.getElementById('problem_input').placeholder = translations[lang]['gemini.p3.placeholder'];
        }

        function getTranslation(key, lang) {
            const keys = key.split('.');
            let result = translations[lang];
            for (const k of keys) {
                result = result[k];
                if (!result) return null;
            }
            return result;
        }

        langButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                setLanguage(btn.dataset.lang);
            });
        });

        // Ustawienie jÄ™zyka na starcie (domyÅ›lnie polski)
        setLanguage('pl');


        // Selektory dla generatora skryptÃ³w
        const generateBtn = document.getElementById('generate_script_btn');
        const industryInput = document.getElementById('industry_input');
        const loader = document.getElementById('script_loader');
        const resultView = document.getElementById('script_result');
        const outputPre = document.getElementById('script_output');

        // Selektory dla generatora obiekcji
        const generateObjectionBtn = document.getElementById('generate_objection_btn');
        const objectionInput = document.getElementById('objection_input');
        const objectionLoader = document.getElementById('objection_loader');
        const objectionResultView = document.getElementById('objection_result');
        const objectionOutputPre = document.getElementById('objection_output');

        // Selektory dla analizatora problemu
        const analyzeProblemBtn = document.getElementById('analyze_problem_btn');
        const problemInput = document.getElementById('problem_input');
        const problemLoader = document.getElementById('problem_loader');
        const problemResultView = document.getElementById('problem_result');
        const problemOutputPre = document.getElementById('problem_output');

        if(generateBtn) {
            generateBtn.addEventListener('click', handleGenerateScript);
        }
        
        if(generateObjectionBtn) {
            generateObjectionBtn.addEventListener('click', handleGenerateObjection);
        }

        if(analyzeProblemBtn) {
            analyzeProblemBtn.addEventListener('click', handleAnalyzeProblem);
        }

        async function handleGenerateScript() {
            const apiKey = ""; // Klucz API zostanie dostarczony przez Å›rodowisko
            
            if (apiKey === "") {
                outputPre.textContent = translations[currentLang]['gemini.error.noKey'];
                resultView.classList.remove('hidden');
                loader.classList.add('hidden');
                return;
            }

            const industry = industryInput.value.trim();
            if (!industry) {
                outputPre.textContent = "ProszÄ™ wpisaÄ‡ branÅ¼Ä™, aby AI mogÅ‚o zadziaÅ‚aÄ‡."; // To teÅ¼ moÅ¼na by przenieÅ›Ä‡ do translations
                resultView.classList.remove('hidden');
                return;
            }

            loader.classList.remove('hidden');
            resultView.classList.add('hidden');
            outputPre.textContent = "";

            const systemPrompt = translations[currentLang]['gemini.p2.system'];
            const userQuery = translations[currentLang]['gemini.p2.user'].replace('{industry}', industry);

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    outputPre.textContent = text;
                    resultView.classList.remove('hidden');
                } else {
                    throw new Error("Nie otrzymano poprawnej odpowiedzi od AI.");
                }

            } catch (error) {
                console.error("BÅ‚Ä…d podczas generowania skryptu:", error);
                outputPre.textContent = "WystÄ…piÅ‚ bÅ‚Ä…d podczas generowania. SprÃ³buj ponownie pÃ³Åºniej.";
                resultView.classList.remove('hidden');
            } finally {
                loader.classList.add('hidden');
            }
        }

        async function handleGenerateObjection() {
            const apiKey = ""; // Klucz API zostanie dostarczony przez Å›rodowisko

            if (apiKey === "") {
                objectionOutputPre.textContent = translations[currentLang]['gemini.error.noKey'];
                objectionResultView.classList.remove('hidden');
                objectionLoader.classList.add('hidden');
                return;
            }

            const objection = objectionInput.value.trim();
            if (!objection) {
                objectionOutputPre.textContent = "ProszÄ™ wpisaÄ‡ obiekcjÄ™ klienta, aby AI mogÅ‚o zadziaÅ‚aÄ‡.";
                objectionResultView.classList.remove('hidden');
                return;
            }

            objectionLoader.classList.remove('hidden');
            objectionResultView.classList.add('hidden');
            objectionOutputPre.textContent = "";

            const systemPrompt = translations[currentLang]['gemini.p1.system'];
            const userQuery = translations[currentLang]['gemini.p1.user'].replace('{objection}', objection);
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    objectionOutputPre.textContent = text;
                    objectionResultView.classList.remove('hidden');
                } else {
                    throw new Error("Nie otrzymano poprawnej odpowiedzi od AI.");
                }

            } catch (error) {
                console.error("BÅ‚Ä…d podczas generowania reakcji na obiekcjÄ™:", error);
                objectionOutputPre.textContent = "WystÄ…piÅ‚ bÅ‚Ä…d podczas generowania. SprÃ³buj ponownie pÃ³Åºniej.";
                objectionResultView.classList.remove('hidden');
            } finally {
                objectionLoader.classList.add('hidden');
            }
        }

        async function handleAnalyzeProblem() {
            const apiKey = ""; // Klucz API zostanie dostarczony przez Å›rodowisko

            if (apiKey === "") {
                problemOutputPre.textContent = translations[currentLang]['gemini.error.noKey'];
                problemResultView.classList.remove('hidden');
                problemLoader.classList.add('hidden');
                return;
            }

            const problem = problemInput.value.trim();
            if (!problem) {
                problemOutputPre.textContent = "ProszÄ™ opisaÄ‡ swÃ³j problem, abym mÃ³gÅ‚ go przeanalizowaÄ‡.";
                problemResultView.classList.remove('hidden');
                return;
            }

            problemLoader.classList.remove('hidden');
            problemResultView.classList.add('hidden');
            problemOutputPre.textContent = "";

            const systemPrompt = translations[currentLang]['gemini.p3.system'];
            const userQuery = translations[currentLang]['gemini.p3.user'].replace('{problem}', problem);

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    problemOutputPre.textContent = text;
                    problemResultView.classList.remove('hidden');
                } else {
                    throw new Error("Nie otrzymano poprawnej odpowiedzi od AI.");
                }

            } catch (error) {
                console.error("BÅ‚Ä…d podczas analizy problemu:", error);
                problemOutputPre.textContent = "WystÄ…piÅ‚ bÅ‚Ä…d podczas generowania. SprÃ³buj ponownie pÃ³Åºniej.";
                problemResultView.classList.remove('hidden');
            } finally {
                problemLoader.classList.add('hidden');
            }
        }

        async function fetchWithBackoff(url, options, retries = 3, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 || response.status >= 500) { // Throttling lub bÅ‚Ä…d serwera
                        throw new Error(`Retryable error: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === retries - 1) throw error; // Ostatnia prÃ³ba nie powiodÅ‚a siÄ™
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2; // Exponential backoff
                }
            }
        }
    });
    </script>
</body>
</html>
